<?php

/**
 * This file was generated by stellar_contract_bindings v0.4.1b0
 * and stellar_sdk v13.0.0b0.
 * 
 * @generated
 */


declare(strict_types=1);

namespace Soneso\StellarSDKTests\bindings;

use Exception;
use GuzzleHttp\Exception\GuzzleException;
use Soneso\StellarSDK\Crypto\KeyPair;
use Soneso\StellarSDK\Soroban\Address;
use Soneso\StellarSDK\Soroban\Contract\AssembledTransaction;
use Soneso\StellarSDK\Soroban\Contract\ClientOptions;
use Soneso\StellarSDK\Soroban\Contract\ContractSpec;
use Soneso\StellarSDK\Soroban\Contract\MethodOptions;
use Soneso\StellarSDK\Soroban\Contract\SorobanClient;
use Soneso\StellarSDK\Xdr\XdrSCMapEntry;
use Soneso\StellarSDK\Xdr\XdrSCVal;
use Soneso\StellarSDK\Xdr\XdrSCValType;

/**
 * Generated contract client for HelloContract
 */
class HelloContract
{
    /**
     * The underlying SorobanClient instance
     * @var SorobanClient
     */
    private SorobanClient $client;

    /**
     * Private constructor that wraps a SorobanClient
     * @param SorobanClient $client
     */
    private function __construct(SorobanClient $client)
    {
        $this->client = $client;
    }

    /**
     * Creates a new HelloContract for the given contract ID
     * @param ClientOptions $options Client options for the contract
     * @return HelloContract
     * @throws Exception
     * @throws GuzzleException
     */
    public static function forClientOptions(ClientOptions $options): self
    {
        $client = SorobanClient::forClientOptions($options);
        return new self($client);
    }

    /**
     * Gets the contract ID
     * @return string
     */
    public function getContractId(): string
    {
        return $this->client->getContractId();
    }

    /**
     * Gets the client options
     * @return ClientOptions
     */
    public function getOptions(): ClientOptions
    {
        return $this->client->getOptions();
    }

    /**
     * Gets the contract specification
     * @return ContractSpec
     */
    public function getContractSpec(): ContractSpec
    {
        return $this->client->getContractSpec();
    }

    /**
     * Invoke the hello method
     *
     * @param string $to
     * @param MethodOptions|null $methodOptions Options for transaction
     * @return array
     * @throws Exception
     * @throws GuzzleException
     */
    public function hello(
        string $to,
        ?MethodOptions $methodOptions = null
    ): array {
        $args = [
            XdrSCVal::forSymbol($to)
        ];
        
        $result = $this->client->invokeMethod(
            name: 'hello',
            args: $args,
            methodOptions: $methodOptions
        );
        return array_map(fn($item) => $item->sym, $result->vec);
    }

    /**
     * Build an AssembledTransaction for the hello method.
     * This is useful if you need to manipulate the transaction before signing and sending.
     *
     * @param string $to
     * @param MethodOptions|null $methodOptions Options for transaction
     * @return AssembledTransaction
     * @throws Exception
     * @throws GuzzleException
     */
    public function buildHelloTx(
        string $to,
        ?MethodOptions $methodOptions = null
    ): AssembledTransaction {
        $args = [
            XdrSCVal::forSymbol($to)
        ];
        
        return $this->client->buildInvokeMethodTx(
            name: 'hello',
            args: $args,
            methodOptions: $methodOptions
        );
    }
}